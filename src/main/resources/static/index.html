<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

      <!-- Bootstrap CSS -->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
    
    <h3>SpringBoot Rest API Crud jujubaprojects</h3>

    <form action="" id = "formCadastroUsuario">

        <div class="mb-3 row">
            <label for="id" class="form-label">ID</label>
            <div class="col-sm-10">
              <input type="text"  class="form-control-plaintext" id="id" readonly = "readonly">
            </div>
          </div>
          <div class="mb-3 row">
            <label for="nome" class="form-label">Nome do Usuário</label>
            <div class="col-sm-10">
              <input type="text" class="form-control" id="Nome" placeholder="Informe o Nome" required = "required">
            </div>
          </div>
          <div class="mb-3 row">
            <label for="idade" class="form-label">Idade</label>
            <div class="col-sm-10">
              <input type="number" class="form-control" id=" idade">
            </div>
          </div>

    </form>

    <button type="button" class="btn btn-primary">Salvar</button>
    <button type="button" class="btn btn-secondary" onclick="document.getElementById('formCadastrar').reset();">Novo</button>
    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">Pesquisar</button>




<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title" id="exampleModalLabel">Pesuisa de Usuário</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <div class="mb-3">
            <label for="recipient-name" class="col-form-label">Informe o nome:</label>
            <input type="text" class="form-control" id="nameBusca">
          </div>
          <button type="button" class="btn btn-success" onclick="pesquisaUser">Buscar</button>
        </form>

        <table class="table" id = "tabelaresultado">
          <thead>
            <tr>
              <th scope="col">Id</th>
              <th scope="col">Nome</th>
              <th scope="col">Editar</th>
            </tr>
          </thead>
          <tbody>
           
          </tbody>
        </table>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
      </div>
    </div>
  </div>
</div>
    


    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  
  <script type="text/javascript">

 function pesquisaUser(){
  var nome = $("#nome").val();

  if(nome != null && nome.trim() != ''){


    $.ajax({
      method: "Get",
      url: "buscarNome",
      data: "name = "+nome,

      contentType: "application/json; charset=utf-8", // Correção: "aplication" e "charset-utf-$" contêm erros de digitação.
      success: function (response) {
        // Correção: "sucess" deve ser "success".
        // Correção: A linha a seguir não faz sentido e deve ser removida:
        // var id = $("#id").val(response.id);
        //alert("Gravou com Sucesso");

      }
    }).fail(function (xhr, status, errorThrown) {
      // Correção: "staus" deve ser "status".
      alert("Erro ao buscar Usuário: " + xhr.responseText);

    });
  }
 }



  function salvarUsuario() {
    var id = $("#id").val();
    var nome = $("#nome").val();
    var idade = $("#idade").val(); // Correção: "vaç()" deve ser "val()".

    $.ajax({
      method: "Post",
      url: "salvar",
      data: JSON.stringify({ id: id, nome: nome, idade: idade }),
      contentType: "application/json; charset=utf-8", // Correção: "aplication" e "charset-utf-$" contêm erros de digitação.
      success: function (response) {
        // Correção: "sucess" deve ser "success".
        // Correção: A linha a seguir não faz sentido e deve ser removida:
        // var id = $("#id").val(response.id);
        alert("Salvo com Sucesso");
      }

      }).fail(function (xhr, status, errorThrown) {
      // Correção: "staus" deve ser "status".
      alert("Erro ao Salvar: " + xhr.responseText);
    });
  }
</script>

  
  </body>
</html>